# âœ§ Star - å æ˜Ÿæ—¶é—´ç³»ç»Ÿ

ä¸€ä¸ªä¸“ä¸šçš„å æ˜Ÿè®¡ç®—ä¸å¯è§†åŒ–ç³»ç»Ÿï¼Œå°†æœ¬å‘½ç›˜ã€è¡Œè¿ã€æ¨è¿ã€å¹´é™æ³•æ•´åˆä¸ºå¯ç†è§£çš„**äººç”Ÿæ—¶é—´å‡½æ•°**ã€‚

> ã€Œä½ èƒ½ç®—æ¸…æ¥šä»€ä¹ˆæ—¶å€™æµªå¤§ï¼Œä½†ä½ æ°¸è¿œä¸èƒ½æ›¿äººå†³å®šæ˜¯å¦ä¸‹æ°´ã€

---

## âœ¨ ç‰¹æ€§

- ğŸŒŸ **æœ¬å‘½ç›˜è®¡ç®—** - è¡Œæ˜Ÿä½ç½®ã€å®«ä½ã€ç›¸ä½ã€å›¾æ¡ˆè¯†åˆ«
- ğŸŒŠ **è¡Œè¿åˆ†æ** - å®æ—¶è¡Œè¿ã€é‡å¤§è¡Œè¿äº‹ä»¶ï¼ˆåœŸæ˜Ÿå›å½’ç­‰ï¼‰
- ğŸŒ™ **æ¨è¿ç³»ç»Ÿ** - æ¬¡é™æ³•æ¨è¿ã€æ¨è¿æœˆç›¸
- ğŸ“… **å¹´é™æ³•** - 12å®«è½®è½¬ã€å¹´åº¦ä¸»æ˜Ÿåˆ†æ
- â° **ç²¾ç»†é¢„æµ‹** - å°æ—¶çº§/æ—¥çº§/å‘¨çº§è¿åŠ¿æ¨æ¼”
- ğŸ“ˆ **äººç”Ÿè¶‹åŠ¿** - å¤šç»´åº¦ç»¼åˆè¶‹åŠ¿å‡½æ•°
- ğŸ¤– **æ™ºèƒ½ä½“æ¥å£** - å®Œæ•´çš„ REST APIï¼Œæ”¯æŒ LLM é›†æˆ

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

```bash
# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼
npm run dev

# æ„å»º
npm run build

# å¯åŠ¨ç”Ÿäº§æœåŠ¡
npm start
```

è®¿é—® http://localhost:3000

---

## ğŸ“š æ–‡æ¡£

| æ–‡æ¡£ | è¯´æ˜ |
|------|------|
| [API æ–‡æ¡£](./docs/API.md) | REST API å®Œæ•´å‚è€ƒ |
| [æ¶æ„æ–‡æ¡£](./docs/ARCHITECTURE.md) | ç³»ç»Ÿæ¶æ„ä¸æ‰©å±•æŒ‡å— |
| [è®¡ç®—æ ¸å¿ƒæ–‡æ¡£](./docs/ASTRO-CORE.md) | å æ˜Ÿè®¡ç®—åº“ä½¿ç”¨æŒ‡å— |

---

## ğŸ—ï¸ é¡¹ç›®ç»“æ„

```
src/
â”œâ”€â”€ app/                      # Next.js App Router
â”‚   â”œâ”€â”€ api/                  # REST API
â”‚   â”‚   â”œâ”€â”€ users/           # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â””â”€â”€ agent/           # æ™ºèƒ½ä½“æ¥å£
â”‚   â”œâ”€â”€ page.tsx             # ä¸»é¡µé¢
â”‚   â””â”€â”€ layout.tsx           # æ ¹å¸ƒå±€
â”‚
â”œâ”€â”€ components/               # React ç»„ä»¶
â”‚   â”œâ”€â”€ chart/               # æ˜Ÿç›˜å¯è§†åŒ–
â”‚   â”œâ”€â”€ timeline/            # æ—¶é—´çº¿ç»„ä»¶
â”‚   â”œâ”€â”€ forecast/            # é¢„æµ‹ç»„ä»¶
â”‚   â””â”€â”€ input/               # è¾“å…¥ç»„ä»¶
â”‚
â””â”€â”€ lib/
    â”œâ”€â”€ astro/               # ğŸ§  å æ˜Ÿè®¡ç®—æ ¸å¿ƒï¼ˆå¯ç‹¬ç«‹ä½¿ç”¨ï¼‰
    â”‚   â”œâ”€â”€ constants.ts     # å¸¸é‡å®šä¹‰
    â”‚   â”œâ”€â”€ ephemeris.ts     # æ˜Ÿå†è®¡ç®—
    â”‚   â”œâ”€â”€ aspects.ts       # ç›¸ä½è®¡ç®—
    â”‚   â”œâ”€â”€ natal-chart.ts   # æœ¬å‘½ç›˜
    â”‚   â”œâ”€â”€ transits.ts      # è¡Œè¿
    â”‚   â”œâ”€â”€ progressions.ts  # æ¨è¿
    â”‚   â”œâ”€â”€ profections.ts   # å¹´é™æ³•
    â”‚   â”œâ”€â”€ daily-forecast.ts # æ¯æ—¥é¢„æµ‹
    â”‚   â””â”€â”€ life-trend.ts    # äººç”Ÿè¶‹åŠ¿
    â”‚
    â”œâ”€â”€ services/            # ä¸šåŠ¡æœåŠ¡å±‚
    â”‚   â””â”€â”€ user-service.ts  # ç”¨æˆ·æ•°æ®æœåŠ¡
    â”‚
    â””â”€â”€ types/               # ç±»å‹å®šä¹‰
        â””â”€â”€ user.ts          # ç”¨æˆ·ç›¸å…³ç±»å‹
```

---

## ğŸ”Œ API å¿«é€Ÿå‚è€ƒ

### ç”¨æˆ·ç®¡ç†

```bash
# åˆ›å»ºç”¨æˆ·
POST /api/users
{
  "id": "user_001",
  "birthData": {
    "date": "1990-03-15T08:30:00",
    "latitude": 39.9042,
    "longitude": 116.4074,
    "timezone": "Asia/Shanghai"
  }
}

# è·å–ç”¨æˆ·å¿«ç…§ï¼ˆæ™ºèƒ½ä½“å¸¸ç”¨ï¼‰
GET /api/users/:id/snapshot

# è·å–é¢„æµ‹
GET /api/users/:id/forecast?type=daily
GET /api/users/:id/forecast?type=weekly
GET /api/users/:id/forecast?type=profection&age=35
```

### æ™ºèƒ½ä½“æ¥å£

```bash
# æ„å»º LLM æç¤ºè¯
POST /api/agent/context
{
  "userId": "user_001",
  "query": "æˆ‘çš„äº‹ä¸šè¿åŠ¿å¦‚ä½•ï¼Ÿ",
  "format": "prompt"
}

# æŸ¥è¯¢ï¼ˆå†…ç½®è§„åˆ™å“åº”ï¼Œå¯æ›¿æ¢ä¸º LLMï¼‰
POST /api/agent/query
{
  "userId": "user_001",
  "query": "ä»Šå¤©é€‚åˆåšä»€ä¹ˆï¼Ÿ"
}
```

è¯¦è§ [API æ–‡æ¡£](./docs/API.md)

---

## ğŸ§  è®¡ç®—æ ¸å¿ƒç‹¬ç«‹ä½¿ç”¨

`lib/astro` æ˜¯çº¯ TypeScript å®ç°ï¼Œå¯ç‹¬ç«‹ä½¿ç”¨ï¼š

```typescript
import { calculateNatalChart, calculateDailyForecast } from './lib/astro';

const chart = calculateNatalChart({
  date: new Date('1990-03-15T08:30:00'),
  latitude: 39.9042,
  longitude: 116.4074,
  timezone: 'Asia/Shanghai'
});

const today = calculateDailyForecast(new Date(), chart);
console.log(`ä»Šæ—¥è¯„åˆ†: ${today.overallScore}/100`);
```

è¯¦è§ [è®¡ç®—æ ¸å¿ƒæ–‡æ¡£](./docs/ASTRO-CORE.md)

---

## ğŸ¤– æ¥å…¥æ™ºèƒ½ä½“

### æ–¹å¼ä¸€ï¼šç›´æ¥è°ƒç”¨ API

```python
import requests

# è·å–ç”¨æˆ·ä¸Šä¸‹æ–‡
context = requests.post('http://localhost:3000/api/agent/context', json={
    'userId': 'user_001',
    'format': 'prompt'
}).json()

# ä¼ ç»™ LLM
response = openai.chat.completions.create(
    model='gpt-4',
    messages=[
        {'role': 'system', 'content': 'ä½ æ˜¯ä¸€ä½ä¸“ä¸šå æ˜Ÿå¸ˆ...'},
        {'role': 'user', 'content': context['prompt'] + '\n\nç”¨æˆ·é—®é¢˜ï¼šä»Šå¤©è¿åŠ¿å¦‚ä½•ï¼Ÿ'}
    ]
)
```

### æ–¹å¼äºŒï¼šä¿®æ”¹å†…ç½®å“åº”

ç¼–è¾‘ `src/app/api/agent/query/route.ts`ï¼Œæ›¿æ¢ `generateRuleBasedResponse` ä¸º LLM è°ƒç”¨ã€‚

---

## ğŸ”§ æŠ€æœ¯æ ˆ

| å±‚çº§ | æŠ€æœ¯ |
|------|------|
| æ¡†æ¶ | Next.js 15 (App Router) |
| UI | HeroUI (NextUI v2) |
| æ ·å¼ | Tailwind CSS |
| åŠ¨ç”» | Framer Motion |
| è¯­è¨€ | TypeScript |
| å¤©æ–‡è®¡ç®— | è‡ªç ”æ˜Ÿå†å¼•æ“ (VSOP87) |

---

## ğŸ“Š è®¡ç®—ç²¾åº¦

| é¡¹ç›® | ç²¾åº¦ | æœ‰æ•ˆèŒƒå›´ |
|------|------|----------|
| å¤ªé˜³ | < 0.01Â° | Â±200å¹´ |
| æœˆäº® | < 0.1Â° | Â±50å¹´ |
| å†…è¡Œæ˜Ÿ | < 0.1Â° | Â±100å¹´ |
| å¤–è¡Œæ˜Ÿ | < 0.5Â° | Â±200å¹´ |

å¯¹äºä¸“ä¸šåº”ç”¨ï¼Œå»ºè®®æ¥å…¥ Swiss Ephemerisã€‚

---

## ğŸ›£ï¸ è·¯çº¿å›¾

- [x] æœ¬å‘½ç›˜è®¡ç®—ä¸å¯è§†åŒ–
- [x] è¡Œè¿/æ¨è¿/å¹´é™æ³•
- [x] æ¯æ—¶/æ¯æ—¥/æ¯å‘¨é¢„æµ‹
- [x] REST API
- [x] æ™ºèƒ½ä½“æ¥å£
- [ ] æ•°æ®åº“æŒä¹…åŒ– (MongoDB/PostgreSQL)
- [ ] ç”¨æˆ·è®¤è¯ (JWT)
- [ ] WebSocket å®æ—¶æ¨é€
- [ ] ç§»åŠ¨ç«¯ App (Flutter)
- [ ] å°ç¨‹åºç‰ˆæœ¬

---

## ğŸ“„ è®¸å¯è¯

MIT

---

## ğŸ’¡ å“²å­¦ç«‹åœº

> å æ˜Ÿä¸æ˜¯ç§‘å­¦æ„ä¹‰ä¸Šçš„é¢„æµ‹æ¨¡å‹ï¼Œ
> ä½†å®ƒæ˜¯ä¸€ä¸ª**é«˜åº¦ç»“æ„åŒ–çš„"äººç”Ÿæ—¶é—´å™äº‹ç³»ç»Ÿ"**ã€‚

å®ƒæ“…é•¿å›ç­”çš„é—®é¢˜æ˜¯ï¼š
- ã€Œæˆ‘ç°åœ¨æ­£èµ°åœ¨æ€æ ·çš„äººç”Ÿé˜¶æ®µï¼Ÿã€
- ã€Œé¡ºæµï¼Œè¿˜æ˜¯é€†æµï¼Ÿã€

å®‡å®™ä¸ä¿è¯å‘½è¿ï¼Œä½†å®ƒç¡®å®ç»™äº†èŠ‚å¾‹ã€‚

---

Built with âœ§ and TypeScript
